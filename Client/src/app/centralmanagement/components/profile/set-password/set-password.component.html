<div
  class="container-fluid d-flex flex-row justify-content-center mb-0 mt-md-1 pt-md-0 pt-0 pb-1 shadow-lg col-xs-12 col-lg-8"
>
  <div class="jumbotron-fluid mx-0 px-0 mb-0 pb-1">
    <div class="container mt-3 mb-2 mx-0 shadow-lg">
      <div class="row">
        <div class="col-12">
          <h2
            class="rub-head4 text-info text-center font-weight-bold pt-0 py-1"
          >
            Set PIN
          </h2>
        </div>
      </div>
    </div>
    <div class="invest-card card-body mt-2 pt-3 mb-0 mx-auto pb-2 shadow-lg">
      <form [formGroup]="userForm" (ngSubmit)="setPassword()">
          <div class="form-group text-primary">
            <label
              for="currentPassword"
              [ngClass]="fval.currentPassword.valid ? 'text-info' : ''"
              >Current PIN<i
                *ngIf="fval.currentPassword.valid"
                class="material-icons"
                >check_circle</i
              ></label
            >

            <div class="input-group mb-0">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <i
                    class="fas fa-lock text-primary mx-auto"
                    style="size: 50px"
                  ></i>
                </div>
              </div>
              <input
                id="currentPassword"
                formControlName="currentPassword"
                [type]="fieldType ? 'text' : 'currentPassword'"
                class="form-control"
                [ngClass]="{
                  'is-invalid':
                    (fval.currentPassword.touched ||
                      fval.currentPassword.dirty) &&
                    fval.currentPassword.errors
                }"
                placeholder="Enter your Current PIN"
                autocomplete="off"
              />
              <div class="input-group-append">
                <span class="input-group-text">
                  <i
                    class="fas"
                    [ngClass]="{
                      'fa-eye-slash': !fieldType,
                      'fa-eye': fieldType
                    }"
                    (click)="toggleFieldType()"
                  ></i>
                </span>
              </div>
            </div>
            <div
              class="text-danger col"
              *ngIf="
                (fval.currentPassword.touched ||
                  fval.currentPassword.dirty) &&
                fval.currentPassword.errors?.required
              "
            >
              The current PIN is required!
            </div>

            <div
              class="col"
              *ngIf="
                (fval.currentPassword.touched ||
                  fval.currentPassword.dirty) &&
                fval.currentPassword.invalid
              "
              [ngClass]="
                fval.currentPassword.errors?.required ||
                fval.currentPassword.errors?.minlength ||
                fval.currentPassword.errors?.maxlength
                  ? 'text-danger'
                  : 'text-info'
              "
            >
              <i class="material-icons">{{
                fval.currentPassword.errors?.required ||
                fval.currentPassword.errors?.minlength ||
                fval.currentPassword.errors?.maxlength
                  ? "cancel"
                  : "check_circle"
              }}</i>
              The current PIN should have exactly four digits!
            </div>
            <div
              class="col"
              *ngIf="
                (fval.currentPassword.touched ||
                  fval.currentPassword.dirty) &&
                fval.currentPassword.invalid
              "
              [ngClass]="
                fval.currentPassword.hasError('required') ||
                fval.currentPassword.hasError('hasNumber')
                  ? 'text-danger'
                  : 'text-info'
              "
            >
              <i class="material-icons">{{
                fval.currentPassword.hasError("required") ||
                fval.currentPassword.hasError("hasNumber")
                  ? "cancel"
                  : "check_circle"
              }}</i>
              Only digits are allowed!
            </div>
          </div>
          <div class="form-group text-primary">
            <label
              for="password"
              [ngClass]="fval.password.valid ? 'text-info' : ''"
              >New PIN<i *ngIf="fval.password.valid" class="material-icons"
                >check_circle</i
              ></label
            >

            <div class="input-group mb-0">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <i
                    class="fas fa-lock text-primary mx-auto"
                    style="size: 50px"
                  ></i>
                </div>
              </div>
              <input
                id="password"
                formControlName="password"
                [type]="fieldType ? 'text' : 'password'"
                class="form-control"
                [ngClass]="{
                  'is-invalid':
                    (fval.password.touched || fval.password.dirty) &&
                    fval.password.errors
                }"
                placeholder="Enter your new PIN"
                autocomplete="off"
              />
              <div class="input-group-append">
                <span class="input-group-text">
                  <i
                    class="fas"
                    [ngClass]="{
                      'fa-eye-slash': !fieldType,
                      'fa-eye': fieldType
                    }"
                    (click)="toggleFieldType()"
                  ></i>
                </span>
              </div>
            </div>
            <div
              class="text-danger col"
              *ngIf="
                (fval.password.touched || fval.password.dirty) &&
                fval.password.errors?.required
              "
            >
              New PIN is required!
            </div>

            <div
              class="col"
              *ngIf="
                (fval.password.touched || fval.password.dirty) &&
                fval.password.invalid
              "
              [ngClass]="
                fval.password.errors?.required ||
                fval.password.errors?.minlength ||
                fval.password.errors?.maxlength
                  ? 'text-danger'
                  : 'text-info'
              "
            >
              <i class="material-icons">{{
                fval.password.errors?.required ||
                fval.password.errors?.minlength ||
                fval.password.errors?.maxlength
                  ? "cancel"
                  : "check_circle"
              }}</i>
              New PIN should have exactly four digits!
            </div>
            <div
              class="col"
              *ngIf="
                (fval.password.touched || fval.password.dirty) &&
                fval.password.invalid
              "
              [ngClass]="
                fval.password.hasError('required') ||
                fval.password.hasError('hasNumber')
                  ? 'text-danger'
                  : 'text-info'
              "
            >
              <i class="material-icons">{{
                fval.password.hasError("required") ||
                fval.password.hasError("hasNumber")
                  ? "cancel"
                  : "check_circle"
              }}</i>
              Only digits are allowed!
            </div>
          </div>
          <div class="form-group text-primary">
            <label
              for="confirmPassword"
              [ngClass]="fval.confirmPassword.valid ? 'text-info' : ''"
              >Confirm PIN<i
                *ngIf="fval.confirmPassword.valid"
                class="material-icons"
                >check_circle</i
              ></label
            >

            <div class="input-group mb-0">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <i
                    class="fas fa-lock text-primary mx-auto"
                    style="size: 50px"
                  ></i>
                </div>
              </div>
              <input
                id="confirmPassword"
                formControlName="confirmPassword"
                [type]="fieldType ? 'text' : 'password'"
                class="form-control"
                [ngClass]="{
                  'is-invalid':
                    (fval.confirmPassword.touched ||
                      fval.confirmPassword.dirty) &&
                    fval.confirmPassword.errors
                }"
                placeholder="Confirm your PIN"
                autocomplete="off"
              />
              <div class="input-group-append">
                <span class="input-group-text">
                  <i
                    class="fas"
                    [ngClass]="{
                      'fa-eye-slash': !fieldType,
                      'fa-eye': fieldType
                    }"
                    (click)="toggleFieldType()"
                  ></i>
                </span>
              </div>
            </div>

            <div
              class="text-danger col"
              *ngIf="fval.confirmPassword.errors?.NoPasswordMatch"
            >
              PINs do not match!
            </div>
            <div
              class="text-danger col"
              *ngIf="
                fval.confirmPassword.errors?.required &&
                (fval.confirmPassword.touched || fval.confirmPassword.dirty)
              "
            >
              Please confirm your PIN!
            </div>
          </div>
      <div class="d-flex mt-3 mb-3 pt-2 pb-3 mx-auto">
          <button
            type="submit"
            class="btn btn-info col-5 mx-auto"
            [disabled]="!userForm.valid"
          >
            Save
          </button>
          <button
            type="button"
            class="btn btn-info col-5 mx-auto"
            (click)="refresh()"
          >
            Cancel
          </button>
          <!-- <ngx-alerts></ngx-alerts> -->
          <ngx-spinner class="bg-success" size="medium" type="line-spin-fade">
            <p class="text-light">Please Wait...</p>
          </ngx-spinner>

          <label class="col" *ngIf="errored" class="text-danger">
            <i class="material-icons">cancel</i>
            <!-- <ngx-alerts></ngx-alerts> -->
          </label>

          <label class="col" *ngIf="posted" class="text-info">
            <i class="material-icons">check_circle</i>
            <!-- <ngx-alerts></ngx-alerts> -->
          </label>
        </div>
      </form>
    </div>
  </div>
</div>
<!--footer -->
<div class="d-flex justify-content-center col-xs-12 col-lg-12 mt-3 mb-3 mx-auto">
  <div class="small text-center text-info">&copy; 2020 - ThunderBolt</div>
</div>
<!--/ footer -->
