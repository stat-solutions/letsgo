<div class="container-fluid m-4">
    <div class="container">
        <div class="row m-2">
            <div class="col-md-12">
                <h3 class="text-center">Settings</h3>
            </div>
        </div>
        <hr>
        <div class="row m-4">
            <div class="col-md-5 text-center">
                <div class="profile">Profile</div>
                <div class="img">
                    <h6 #take>profile Picture</h6>
                   <img src='/../../../assets/img/man.svg' alt="Not found" class="img-fluid img-rounded">
                </div>
                <div class="name"><h5>{{userData.userName}}</h5></div>
                <div class="buttons m-2">
                    <button class="btn btn-primary btn-block"
                    (click)="update(upload)"
                    >UpdateAvatar</button>
                    <!--update avatar popup-->
         <ng-template #upload let-modal>
        <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">Profile update</h4>
            <button type="button" class="close" aria-label="Close" (click)="closeModal()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="input-group mb-3">
  <div class="form-group">
    <input type="file" 
    (change)="onFileChange($event)" 
    id="resetFile" 
    accept="image/*" >
  </div>
</div>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-outline-dark"
             (click)="updateProfile()" [disable]="disableButton">Update</button>
             <button type="button" class="btn btn-outline-dark" (click)="closeModal()">Cancel</button>
      </div>
</ng-template>
<ngx-alerts></ngx-alerts>


                    <!--update info avatar popup-->
                </div>    
            </div>
            <div class="col-md-7">
             <div class="m-2">
                 <!--form-->
                 <form [formGroup]="userForm" (ngSubmit)="save()">
                    <div class="row">
                        <div class="col-12 col-md-6">
                            <div class="form-group text-primary">
                                <label for="full_name" [ngClass]="fval.full_name.valid ? 'text-info' : ''"><i *ngIf="fval.full_name.valid" class="material-icons"
                >check_circle</i
              >Full Name</label
            >
            <div class="input-group mb-2">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <i class="fas fa-user text-primary mx-auto" style="size: 50px;">
                  </i>
                </div>
              </div>
              <input
                id="full_name"
                formControlName="full_name"
                type="text"
                class="form-control"
                [ngClass]="{
                  'is-invalid':
                    (fval.full_name.touched || fval.full_name.dirty) &&
                    fval.full_name.errors
                }"
                placeholder="Enter Name"
                autocomplete="off"
              />
            </div>
            <div
              class="text-danger col"
              *ngIf="
                (fval.full_name.touched || fval.full_name.dirty) &&
                fval.full_name.errors?.required
              "
            >
              The full name is required!
            </div>
          </div>
        </div>
      
                     <div class="col-12 col-md-6">
            <div class="form-group text-primary">
            <label for="email2" [ngClass]="fval.email2.valid ? 'text-info' : ''"
              >Email <i *ngIf="fval.email2.valid" class="material-icons"
                >check_circle</i
              ></label
            >
            <div class="input-group mb-1">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <i
                    class="fas fa-envelope text-primary mx-auto"
                    style="size: 50px;"
                  ></i>
                </div>
              </div>
              <input
                id="email2"
                formControlName="email2"
                type="text"
                class="form-control"
                [ngClass]="{
                  'is-invalid':
                    (fval.email2.touched || fval.email2.dirty) && fval.email2.errors
                }"
                placeholder="Second email address (optional)"
                autocomplete="off"
              />
            </div>
            <div
              class="text-danger col"
              *ngIf="
                (fval.email2.touched || fval.email2.dirty) &&
                fval.email2.errors?.email2
              "
            >
              Please enter valid email address!
            </div>
          </div>
    </div>
      </div>
      <div class="row">
        <div class="col-12 col-md-6">
        <div class="form-group text-primary">
            <label
              for="user_contact_number1"
              [ngClass]="fval.user_contact_number1.valid ? 'text-info' : ''"
              >Phone contact<i
                *ngIf="fval.user_contact_number1.valid"
                class="material-icons"
                >check_circle</i
              ></label
            >
            <div class="input-group mb-2">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <i
                    class="fas fa-phone text-primary mx-auto"
                    style="size: 50px;"
                  ></i>
                </div>
              </div>
              <input
                id="user_contact_number1"
                formControlName="user_contact_number1"
                type="text"
                class="form-control"
                [ngClass]="{
                  'is-invalid':
                    (fval.user_contact_number1.touched ||
                      fval.user_contact_number1.dirty) &&
                    fval.user_contact_number1.errors
                }"
                placeholder="e.g. 07XXXXXXXX"
                autocomplete="off"
              />
            </div>
            <div
              class="text-danger col"
              *ngIf="
                (fval.user_contact_number1.touched ||
                  fval.user_contact_number1.dirty) &&
                fval.user_contact_number1.errors?.required
              "
            >
              The phone number is required!
            </div>
            <div
              class="text-danger col"
              *ngIf="
                (fval.user_contact_number1.touched ||
                  fval.user_contact_number1.dirty) &&
                fval.user_contact_number1.errors?.hasNumber
              "
            >
              The phone number should be equal to 10 "digits"!
            </div>
          </div>
        </div>
        <div class="col-12 col-md-6">
          <!--branch-->
          <div class="form-group text-primary">
            <label
              for="position"
              [ngClass]="fval.branches.valid ? 'text-info' : ''"
              ><i *ngIf="fval.branches.valid" class="material-icons"
                >check_circle</i
              >Branch</label
            >
            <div class="input-group mb-2">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <i class="fas fa-code-branch text-primary mx-auto" style="size: 50px;">
                  </i>
                </div>
              </div>
              <select
              formControlName="branches"
              class="form-control"
              [ngClass]="{
                'is-invalid':
                  (fval.branches.touched || fval.branches.dirty) &&
                  fval.branches.errors
              }"
              autocomplete="off"
              placeholder="Select a branch"
              (change) ="getBranch($event)"
              required
            >
            <option value="" selected disabled>selectBranch</option>
            <option *ngFor="let branches of branch" [ngValue]="branches">{{branches}}</option>
    
            </select>
        </div>
            <div
              class="text-danger col"
              *ngIf="
                (fval.branches.touched || fval.branches.dirty) &&
                fval.branches.errors?.required
              "
            >
              The branch is required!
            </div>
          </div>
    
          <!--branch-->
                  </div>
        </div>
        <div class="row">
          <div class="col-12 col-md-12">
              <!--current-->
              <div class="form-group text-primary">
                <label
                  for="currentPassword"
                  [ngClass]="fval.currentPassword.valid ? 'text-info' : ''"
                  >Current Password<i *ngIf="fval.currentPassword.valid" class="material-icons"
                    >check_circle</i
                  ></label
                >
  
                <div class="input-group mb-0">
                  <div class="input-group-prepend">
                    <div class="input-group-text">
                      <i
                        class="fas fa-lock text-primary mx-auto"
                        style="size: 50px;"
                      ></i>
                    </div>
                  </div>
                  <input
                    id="currentPassword"
                    formControlName="currentPassword"
                    [type]="fieldType ? 'text' : 'currentPassword'"
                    class="form-control"
                    [ngClass]="{
                      'is-invalid':
                        (fval.currentPassword.touched || fval.currentPassword.dirty) &&
                        fval.currentPassword.errors
                    }"
                    placeholder="Enter your Current password"
                    autocomplete="off"
                  />
                  <div class="input-group-append">
                    <span class="input-group-text">
                      <i
                        class="fas"
                        [ngClass]="{
                          'fa-eye-slash': !fieldType,
                          'fa-eye': fieldType
                        }"
                        (click)="toggleFieldType()"
                      ></i>
                    </span>
                  </div>
                </div>
                <div
                  class="text-danger col"
                  *ngIf="
                    (fval.currentPassword.touched || fval.currentPassword.dirty) &&
                    fval.currentPassword.errors?.required
                  "
                >
                  currentPassword is required!
                </div>
  
                <div
                  class="col"
                  *ngIf="
                    (fval.currentPassword.touched || fval.currentPassword.dirty) &&
                    fval.currentPassword.invalid
                  "
                  [ngClass]="
                    fval.currentPassword.errors?.required ||
                    fval.currentPassword.errors?.minlength ||
                    fval.currentPassword.errors?.maxlength
                      ? 'text-danger'
                      : 'text-info'
                  "
                >
                  <i class="material-icons">{{
                    fval.currentPassword.errors?.required ||
                    fval.currentPassword.errors?.minlength ||
                    fval.currentPassword.errors?.maxlength
                      ? "cancel"
                      : "check_circle"
                  }}</i>
                  currentPassword should have exactly four digits!
                </div>
                <div
                  class="col"
                  *ngIf="
                    (fval.currentPassword.touched || fval.currentPassword.dirty) &&
                    fval.currentPassword.invalid
                  "
                  [ngClass]="
                    fval.currentPassword.hasError('required') ||
                    fval.currentPassword.hasError('hasNumber')
                      ? 'text-danger'
                      : 'text-info'
                  "
                >
                  <i class="material-icons">{{
                    fval.currentPassword.hasError("required") ||
                    fval.currentPassword.hasError("hasNumber")
                      ? "cancel"
                      : "check_circle"
                  }}</i>
                  Only digits are allowed!
                </div>
              </div>
            
              <!--current-->

                  
        </div>
        </div>
        <div class="row">
          <div class="col-12 col-md-6">
                <div class="form-group text-primary">
              <label
                for="password"
                [ngClass]="fval.password.valid ? 'text-info' : ''"
                >Password<i *ngIf="fval.password.valid" class="material-icons"
                  >check_circle</i
                ></label
              >
    
              <div class="input-group mb-0">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <i
                      class="fas fa-lock text-primary mx-auto"
                      style="size: 50px;"
                    ></i>
                  </div>
                </div>
                <input
                  id="password"
                  formControlName="password"
                  [type]="fieldType ? 'text' : 'password'"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid':
                      (fval.password.touched || fval.password.dirty) &&
                      fval.password.errors
                  }"
                  placeholder="Enter your password"
                  autocomplete="off"
                />
                <div class="input-group-append">
                  <span class="input-group-text">
                    <i
                      class="fas"
                      [ngClass]="{
                        'fa-eye-slash': !fieldType,
                        'fa-eye': fieldType
                      }"
                      (click)="toggleFieldType()"
                    ></i>
                  </span>
                </div>
              </div>
              <div
                class="text-danger col"
                *ngIf="
                  (fval.password.touched || fval.password.dirty) &&
                  fval.password.errors?.required
                "
              >
                Password is required!
              </div>
    
              <div
                class="col"
                *ngIf="
                  (fval.password.touched || fval.password.dirty) &&
                  fval.password.invalid
                "
                [ngClass]="
                  fval.password.errors?.required ||
                  fval.password.errors?.minlength ||
                  fval.password.errors?.maxlength
                    ? 'text-danger'
                    : 'text-info'
                "
              >
                <i class="material-icons">{{
                  fval.password.errors?.required ||
                  fval.password.errors?.minlength ||
                  fval.password.errors?.maxlength
                    ? "cancel"
                    : "check_circle"
                }}</i>
                Password should have exactly four digits!
              </div>
              <div
                class="col"
                *ngIf="
                  (fval.password.touched || fval.password.dirty) &&
                  fval.password.invalid
                "
                [ngClass]="
                  fval.password.hasError('required') ||
                  fval.password.hasError('hasNumber')
                    ? 'text-danger'
                    : 'text-info'
                "
              >
                <i class="material-icons">{{
                  fval.password.hasError("required") ||
                  fval.password.hasError("hasNumber")
                    ? "cancel"
                    : "check_circle"
                }}</i>
                Only digits are allowed!
              </div>
            </div>
    </div>
    <div class="col-12 col-md-6">
      <div class="form-group text-primary">
              <label
                for="confirmPassword"
                [ngClass]="fval.confirmPassword.valid ? 'text-info' : ''"
                >Confirm Password<i
                  *ngIf="fval.confirmPassword.valid"
                  class="material-icons"
                  >check_circle</i
                ></label
              >
    
              <div class="input-group mb-0">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <i
                      class="fas fa-lock text-primary mx-auto"
                      style="size: 50px;"
                    ></i>
                  </div>
                </div>
                <input
                  id="confirmPassword"
                  formControlName="confirmPassword"
                  [type]="fieldType ? 'text' : 'password'"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid':
                      (fval.confirmPassword.touched ||
                        fval.confirmPassword.dirty) &&
                      fval.confirmPassword.errors
                  }"
                  placeholder="Confirm your password"
                  autocomplete="off"
                />
                <div class="input-group-append">
                  <span class="input-group-text">
                    <i
                      class="fas"
                      [ngClass]="{
                        'fa-eye-slash': !fieldType,
                        'fa-eye': fieldType
                      }"
                      (click)="toggleFieldType()"
                    ></i>
                  </span>
                </div>
              </div>
    
              <div
                class="text-danger col"
                *ngIf="fval.confirmPassword.errors?.NoPasswordMatch"
              >
                Passwords do not match!
              </div>
              <div
                class="text-danger col"
                *ngIf="
                  fval.confirmPassword.errors?.required &&
                  (fval.confirmPassword.touched || fval.confirmPassword.dirty)
                "
              >
                Please confirm your password!
              </div>
            </div>
    </div>
        </div>
            <div class="d-flex my-2 py-2 mx-auto">
              <button
                type="submit"
                class="btn btn-info col-4 mx-auto"
              >
                Save
              </button>
    
              <ngx-spinner bdColor="#175b6f86" size="medium" color="#27ceaa" type="ball-clip-rotate-multiple">
                <!--p class="text-light justify-content-between align-items-center mt-4 pt-4 mt-md-4 pt-md-2">Please wait...</p-->
              </ngx-spinner>
    
              <!--label class="col" class="text-danger">
                <i class="material-icons">Cancel</i>
    
                <ngx-alerts></ngx-alerts>
              </label-->
    
              <!--label class="col" class="text-info">
                <i class="material-icons">check_circle</i>
                <ngx-alerts></ngx-alerts>
              </label-->
    
              <button
                type="button"
                class="btn btn-info col-4 mx-auto"
                (click)="cancel()"
              >
                Cancel
              </button>
              <button
                type="button"
                class="btn btn-info col-4 mx-auto"
                (click)="enableEdit()"
              >
                Edit
              </button>
            </div>
        </form>
                 <!--form-->
            
            </div>


            </div>
        </div>
    </div>

</div>




