<div
class="container-fluid d-flex flex-row justify-content-center mb-0 mt-1 pt-0 pt-lg-5 pt-xl-0 pb-0 shadow-lg col-xs-12 col-lg-8"
>
  <div class="jumbotron-fluid mx-0 px-0 mt-1 mt-xl-0 pt-3 pt-xl-0 mb-0 pb-0">
    <div class="row">
      <div class="col-12">
        <h3 class="rub-head4 text-info text-center font-weight-bold py-1">
          CREATE LOAN
        </h3>
        <hr class="mt-0" />
      </div>
    </div>
  <div class="card-body mt-2 pt-3 mt-xl-1 mb-0 mx-auto pb-4 shadow-lg">
    <form [formGroup]="userForm" (ngSubmit)="register()">
      <div class="form-group text-primary">
         <button
             class="btn btn-success m-4"
             type="button"
             (click)="getCustomer(template)"
             >ChooseCustomer</button>
             <!--create a customer modal-->
              <ng-template #template>
              <div class="modal-header">
                <h4 class="modal-title pull-left">Letshego Uganda Limited</h4>
                <button type="button" class="close pull-right" aria-label="Close" (click)="closeModal()">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
               <!--customer table-->
               <div class="state-table table-responsive pt-0 pb-0">
                <div class="form-group">
                  <input type="text"
                  (input)="getValue($event)"
                  placeholder="seach customer" class="form-control">
                </div>
            <!--table-->
            <table class="table table-hove table-striped table-sm" *ngIf="checkTable(filteredCustomers); else noloans">
              <thead class="bg-dark text-info">
                <tr class="mx-2">
              <th scope="col">
                <i class="fas fa-sort pointerCursor"
                (click)="sort('customerId')">ID</i>
              </th>
              <th scope="col">
               <i class="fas fa-sort pointerCursor"
                (click)="sort('customerName')">Name</i>
              </th>
              <th scope="col">
                  <i class="fas fa-sort pointerCursor"
                (click)="sort('documentType')">DocumentType</i>
              </th>
              <th scope="col">
                <i class="fas fa-sort pointerCursor"
                (click)="sort('documentId')">DoumentId</i>
              </th>
              <th scope="col">
                PhoneOne
              </th>
              <th scope="col">
                PhoneTwo
              </th>
            </tr>
          </thead>
          <tbody>
                <tr class="mx-2 pointerCursor"
                *ngFor="let customer of filteredCustomers|orderBy:key:reverse|paginate:{
 id:'my_pages', itemsPerPage:pageSize, currentPage:currentPage,totalItems:totalItems
}"
                (click)="getCustomerName(customer.customerId)">
              <td>{{customer.customerId}}</td>
              <td>{{ customer.customerName }}</td>
              <td>{{ customer.documentType}}</td>
              <td>{{ customer.documentId }}</td>
              <td>{{ customer.phoneNumber1 }}</td>
              <td>{{ customer.phoneNumber2 }}</td>
            </tr>
          </tbody>
        </table>
              <pagination-controls  id="my_pages"
            (pageChange)="pageChanged($event)"
            (pageBoundsCorrection)="pageChanged($event)"
            directionLinks="true">
           </pagination-controls>
        <ng-template #noloans>
          <div class="col-12 my-5 py-5 justify-content-between">
            <h4 class="text-center text-info">No Customer found!</h4>
          </div>
        </ng-template
        >
<<<<<<< Updated upstream
        <div class="input-group mb-0">
=======
</div>
               <!--customer table-->
              </div>
        </ng-template>
        <br>
             <!------------->
        <label for="full_name">Customer Name</label>
        <div class="input-group mb-2">
>>>>>>> Stashed changes
          <div class="input-group-prepend">
            <div class="input-group-text">
              <i class="fas fa-user text-primary mx-auto" style="size: 50px;">
              </i>
            </div>
          </div>
          <input
            id="full_name"
            formControlName="full_name"
            type="text"
            required
            class="form-control"
            placeholder="choose name"
            autocomplete="off"
          />
        </div>
<<<<<<< Updated upstream
        <div
          class="text-danger col"
          *ngIf="
            (fval.full_name.touched || fval.full_name.dirty) &&
            fval.full_name.errors?.required
          "
        >
          The customer name is required!
        </div>
        <div
        class="text-danger col"
        *ngIf="
          (fval.full_name.touched || fval.full_name.dirty) &&
          fval.full_name.errors?.minlength
        "
      >
        At least four character required!
      </div>
      <div
        class="text-danger col"
        *ngIf="
          (fval.full_name.touched || fval.full_name.dirty) &&
          checkCustomer(fval.full_name.value)
        "
      >
        Customer doesnot exist!
      </div>
=======
>>>>>>> Stashed changes
      </div>
      <!--loan type-->
      <div class="form-group text-primary">
        <label
          for="position"
          [ngClass]="fval.loan_type.valid ? 'text-info' : ''"
          ><i *ngIf="fval.loan_type.valid" class="material-icons"
            >check_circle</i
          >Loan Type</label
        >
        <div class="input-group mb-0">
          <div class="input-group-prepend">
            <div class="input-group-text">
              <i class="fas fa-anchor text-primary mx-auto" style="size: 50px;">
              </i>
            </div>
          </div>
          <select
          formControlName="loan_type"
          class="form-control"
          [ngClass]="{
            'is-invalid':
              (fval.loan_type.touched || fval.loan_type.dirty) &&
              fval.loan_type.errors
          }"
          autocomplete="off"
          placeholder="Select a loan"
          (change) ="getLoanType($event)"
          required
        >
        <option value="" selected disabled>selectLoan</option>
        <option *ngFor="let loan_type of loan_types" [ngValue]="loan_type">{{loan_type}}</option>

        </select>
    </div>
        <div
          class="text-danger col"
          *ngIf="
            (fval.loan_type.touched || fval.loan_type.dirty) &&
            fval.loan_type.errors?.required
          "
        >
          The loan type is required!
        </div>
      </div>

       <div class="form-group text-primary">
        <label
          for="amount"
          [ngClass]="fval.amount.valid ? 'text-info' : ''"
          ><i *ngIf="fval.amount.valid" class="material-icons"
            >check_circle</i
          >Amount</label
        >
        <div class="input-group mb-0">
          <input
            id="amount"
            formControlName="amount"
            type="text"
            required
            class="form-control"
            [ngClass]="{
              'is-invalid':
                (fval.amount.touched || fval.amount.dirty) &&
                fval.amount.errors
            }"
            placeholder="Enter amount"
            autocomplete="off"
          />
        </div>
        <div
          class="text-danger col"
          *ngIf="
            (fval.amount.touched || fval.amount.dirty) &&
            fval.amount.errors?.required
          "
        >
          The amount is required!
        </div>
      </div>


      <!--loan type-->
      <div class="form-group text-primary">
        <label
          for="loan_product"
          [ngClass]="fval.loan_product.valid ? 'text-info' : ''"
          ><i *ngIf="fval.loan_product.valid" class="material-icons"
            >check_circle</i
          >Loan Product</label
        >
        <div class="input-group mb-0">
          <div class="input-group-prepend">
            <div class="input-group-text">
              <i class="fas fa-anchor text-primary mx-auto" style="size: 50px;">
              </i>
            </div>
          </div>
          <input
            id="loan_product"
            formControlName="loan_product"
            type="text"
            required
            class="form-control"
            [ngClass]="{
              'is-invalid':
                (fval.loan_product.touched || fval.loan_product.dirty) &&
                fval.loan_product.errors
            }"
            placeholder="Enter Loan Product"
            autocomplete="off"
          />
        </div>
        <div
          class="text-danger col"
          *ngIf="
            (fval.loan_product.touched || fval.loan_product.dirty) &&
            fval.amount.errors?.required
          "
        >
          The loan product is required!
        </div>
      </div>

      <div class="form-group text-primary">
        <label
          for="tenure"
          [ngClass]="fval.tenure.valid ? 'text-info' : ''"
          ><i *ngIf="fval.tenure.valid" class="material-icons"
            >check_circle</i
          >Tenure</label
        >
        <div class="input-group mb-0">
          <div class="input-group-prepend">
            <div class="input-group-text">
              <i class="fas fa-anchor text-primary mx-auto" style="size: 50px;">
              </i>
            </div>
          </div>
          <input
            id="tenure"
            formControlName="tenure"
            type="text"
            required
            class="form-control"
            [ngClass]="{
              'is-invalid':
                (fval.tenure.touched || fval.tenure.dirty) &&
                fval.tenure.errors
            }"
            placeholder="Enter Loan tenure"
            autocomplete="off"
          />
        </div>
        <div
          class="text-danger col"
          *ngIf="
            (fval.tenure.touched || fval.tenure.dirty) &&
            fval.tenure.errors?.required
          "
        >
          The loan tenure is required!
        </div>
      </div>
      <!--securities-->
      <label for="">Choose Security</label>
      <div class="form-group form-check">
        <input type="checkbox"
        (click)="getAllSecurities(checkAllSecurities)"
        id="checks">
        <label for="checks">&nbsp;&nbsp;Check All Security</label>
      </div>

        <div class="form-group form-check" *ngFor="let security of FormArrayControls.controls; let i = index ">
          <div class="form-control">
             <input type="checkbox"
             [formControl]="security"
             required
             (change) = "getSecuritiesChecked()"
             class="m-2" id="checkbox{{i}}">
            <label  for="checkbox{{i}}">{{securities[i]}}</label>
          </div>
          <div class="text-center">
            <p *ngIf="error" class="text-danger">At least One Security is required!</p>
          </div>

  </div>


          <!---->
      <div
          class="text-danger col"
          *ngIf="invalid"
        >
          All fields are required!
        </div>
      <div class="d-flex my-2 py-2 mx-auto">
        <button
          type="submit"
          class="btn btn-info col-5 mx-auto"
        >
          Create
        </button>

        <button
          type="button"
          class="btn btn-info col-5 mx-auto"
          (click)="returnHome()"
          routerLink = "/application/createloans"
        >
          Cancel
        </button>
        <ngx-spinner class="bg-info" size="medium" type="ball-scale-multiple">
          <p class="text-light">Please wait...</p>
        </ngx-spinner>

        <label class="col" *ngIf="errored" class="text-danger">
          <i class="material-icons">Cancel</i>

          <ngx-alerts></ngx-alerts>
        </label>

        <label class="col" *ngIf="posted" class="text-info">
          <i class="material-icons">check_circle</i>
          <ngx-alerts></ngx-alerts>
        </label>
      </div>
    </form>
    <!-- </div>  -->
    <!-- </div>   -->
  </div>
<!-- footer -->
<div class="container mt-3 mt-lg-5 pt-lg-5 mt-xl-3 pt-xl-0 mb-2 pb-2">
  <div class="col-xs-12 col-lg-12">
    <div class="small text-center text-info">&copy; 2020 - LoanLead</div>
  </div>
</div>
<!-- footer /-->
  </div>
</div>


