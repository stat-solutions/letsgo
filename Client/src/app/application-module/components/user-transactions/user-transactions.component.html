<div
  class="container-fluid justify-content-center mt-xl-0 mb-0 pt-1 pt-xl-0 pb-2 pb-md-0 shadow-lg col-xs-12"
>
  <div class="jumbotron-fluid mx-0 px-0 mt-1 mt-xl-0 pt-3 pt-xl-0 mb-0 pb-0">
    <div
      class="head-container container my-1 mx-auto px-auto pt-0 pb-2 shadow-lg"
    >
      <div class="row">
        <div class="col-12">
          <h3 class="rub-head4 text-info text-center font-weight-bold py-1">
            TRANSACTIONS
          </h3>
          <hr class="mt-0" />
        </div>
      </div>
      <div class="row">
        <div class="col-8 col-sm-7 col-md-8 col-lg-9 col-xl-8">
          <div class="mt-1 mt-xl-0 pt-xl-0 mb-2 mx-0 pl-0 pl-xl-2">
            <!-- the search section -->
            <input
              type="text"
              (input)="getValue($event)"
              class="form-control col-12 col-sm-10 col-md-8 col-lg-7 col-xl-6"
              name=""
              id="loan"
              placeholder="Search"
              autocomplete="on"
            />
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-12">

          <!--record container-->
        <div
          class="invest-card card mt-1 py-2 mb-2 mx-auto px-2 shadow-lg"
          *ngIf="checkTransactionsTable(receivedLoans); else noreceived"
        >
          <div
            class="iteration"
            *ngIf="checkTable(filteredLoans); else noloans"
          >
            <div class="item-container-1 mt-1">
              <div
                class="list-card card mt-1 pt-2 mb-0 mx-auto px-0 pb-1 shadow-lg"
                *ngFor="
                      let received of filteredReceivedLoans;
                      let i = index
                    "
              >
                <div class="list-card-body card-body my-0 py-0 mx-0">
                  <div class="row my-0 py-0">
                  <div
                    class="col-1 mx-md-0 px-md-0 d-flex justify-content-center"
                  >
                      <div class="dropdown">
                        <button
                          class="btn btn-primary dropdown-toggle"
                          type="button"
                          id="dropdownMenuButton"
                          data-toggle="dropdown"
                          aria-haspopup="true"
                          aria-expanded="false"
                        ></button>
                        <div
                          class="dropdown-menu"
                          aria-labelledby="dropdownMenuButton"
                        >
                          <a
                            class="dropdown-item pointerCursor text-primo"
                            (click)="forwardSelected(template, received.Id)"
                          >
                            Forward
                          </a>
                          <a
                            class="dropdown-item pointerCursor text-primo"
                            (click)="editLoan(edit, received.Id, i)"
                          ><i class="fas fa-edit"></i>
                            Edit
                        </a>
                        </div>
                      </div>
                  </div>
                    <div class="col-11">
                      <div class="row mx-md-0 px-md-0">
                        <div class="col-12 col-md-6 col-xl-4">
                          <div class="row">
                            <div
                              class="col-5 col-md-4 d-flex justify-content-start mx-md-0 px-md-0"
                            >
                              <span class="">ID</span>
                            </div>
                            <div
                              class="col-7 col-md-8 d-flex justify-content-start font-weight-bold mx-md-0 px-md-0"
                            >
                              <span class="itemCreated"> {{ received.Id }} </span>
                            </div>
                          </div>
                        </div>
                        <div class="col-12 col-md-6 col-xl-4">
                          <div class="row">
                            <div
                              class="col-5 col-md-4 d-flex justify-content-start mx-md-0 px-md-0"
                            >
                              <span class="">Customer</span>
                            </div>
                            <div
                              class="col-7 col-md-8 d-flex justify-content-start font-weight-bold mx-md-0 px-md-0"
                            >
                              <span class="itemCreated">
                                {{ received.Customer }}
                              </span>
                            </div>
                          </div>
                        </div>
                        <div class="col-12 col-md-6 col-xl-4">
                          <div class="row">
                            <div
                              class="col-5 col-md-4 d-flex justify-content-start mx-md-0 px-md-0"
                            >
                              <span class="">Loan Type</span>
                            </div>
                            <div
                              class="col-7 col-md-8 d-flex justify-content-start font-weight-bold mx-md-0 px-md-0"
                            >
                              <span class="itemCreated">
                                {{ received.LoanType }}
                              </span>
                            </div>
                          </div>
                        </div>
                        <div class="col-12 col-md-6 col-xl-4">
                          <div class="row">
                            <div
                              class="col-5 col-md-4 d-flex justify-content-start mx-md-0 px-md-0"
                            >
                              <span class="">Loan Product</span>
                            </div>
                            <div
                              class="col-7 col-md-8 d-flex justify-content-start font-weight-bold mx-md-0 px-md-0"
                            >
                              <span class="itemCreated">
                                {{ received.LoanProduct }}
                              </span>
                            </div>
                          </div>
                        </div>
                        <div class="col-12 col-md-6 col-xl-4">
                          <div class="row">
                            <div
                              class="col-5 col-md-4 d-flex justify-content-start mx-md-0 px-md-0"
                            >
                              <span class="">Tenure</span>
                            </div>
                            <div
                              class="col-7 col-md-8 d-flex justify-content-start font-weight-bold mx-md-0 px-md-0"
                            >
                              <span class="itemCreated">
                                {{ received.Tenure }}
                              </span>
                            </div>
                          </div>
                        </div>
                        <div class="col-12 col-md-6 col-xl-4">
                          <div class="row">
                            <div
                              class="col-5 col-md-4 d-flex justify-content-start mx-md-0 px-md-0"
                            >
                              <span class="">Amount</span>
                            </div>
                            <div
                              class="col-7 col-md-8 d-flex justify-content-start font-weight-bold mx-md-0 px-md-0"
                            >
                              <span class="itemCreated">
                                {{ received.Amount | number }}
                              </span>
                            </div>
                          </div>
                        </div>
                        <div class="col-12 col-md-6 col-xl-4">
                          <div class="row">
                            <div
                              class="col-5 col-md-4 d-flex justify-content-start mx-md-0 px-md-0"
                            >
                              <span class="">Stage</span>
                            </div>
                            <div
                              class="col-7 col-md-8 d-flex justify-content-start font-weight-bold mx-md-0 px-md-0"
                            >
                              <span class="itemCreated">
                                {{ received.Stage }}
                              </span>
                            </div>
                          </div>
                        </div>
                        <div class="col-12 col-md-6 col-xl-4">
                          <div class="row">
                            <div
                              class="col-5 col-md-4 d-flex justify-content-start mx-md-0 px-md-0"
                            >
                              <span class="">Status</span>
                            </div>
                            <div
                              class="col-7 col-md-8 d-flex justify-content-start font-weight-bold mx-md-0 px-md-0"
                            >
                              <span class="itemCreated">
                                {{ received.Status }}
                              </span>
                            </div>
                          </div>
                        </div>
                        <div class="col-12 col-md-6 col-xl-4">
                          <div class="row">
                            <div
                              class="col-5 col-md-4 d-flex justify-content-start mx-md-0 px-md-0"
                            >
                              <span class="">Moved by</span>
                            </div>
                            <div
                              class="col-7 col-md-8 d-flex justify-content-start font-weight-bold mx-md-0 px-md-0"
                            >
                              <span class="itemCreated">
                                {{ received.LoanMovedBy }}
                              </span>
                            </div>
                          </div>
                        </div>
                        <div class="col-12 col-md-6 col-xl-4">
                          <div class="row">
                            <div
                              class="col-5 col-md-4 d-flex justify-content-start mx-md-0 px-md-0"
                            >
                              <span class="">Stage At</span>
                            </div>
                            <div
                              class="col-7 col-md-8 d-flex justify-content-start font-weight-bold mx-md-0 px-md-0"
                            >
                              <span class="itemCreated">
                                {{ received.StageAt }}
                              </span>
                            </div>
                          </div>
                        </div>
                        <div class="col-12 col-md-6 col-xl-4">
                          <div class="row">
                            <div
                              class="col-5 col-md-4 d-flex justify-content-start mx-md-0 px-md-0"
                            >
                              <span class="">Age</span>
                            </div>
                            <div
                              class="col-7 col-md-8 d-flex justify-content-start font-weight-bold mx-md-0 px-md-0"
                            >
                              <span class="itemCreated">
                                {{ received.HowLong }}
                              </span>
                            </div>
                          </div>
                        </div>
                        <div class="col-12 col-md-6 col-xl-4">
                          <div class="row">
                            <div
                              class="col-5 col-md-4 d-flex justify-content-start mx-md-0 px-md-0"
                            >
                              <span class="">Created At</span>
                            </div>
                            <div
                              class="col-7 col-md-8 d-flex justify-content-start font-weight-bold mx-md-0 px-md-0"
                            >
                              <span class="itemCreated">
                                {{ received.CreatedAt }}
                              </span>
                            </div>
                          </div>
                        </div>
                        <div class="col-12 col-md-6 col-xl-4">
                          <div class="row">
                            <div
                              class="col-5 col-md-4 d-flex justify-content-start mx-md-0 px-md-0"
                            >
                              <span class="">Total Age</span>
                            </div>
                            <div
                              class="col-7 col-md-8 d-flex justify-content-start font-weight-bold mx-md-0 px-md-0"
                            >
                              <span class="itemCreated">
                                {{ received.TotalAge }}
                              </span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!--/ end of record container-->
              <ngx-alerts></ngx-alerts>
            </div>
          </div>
        </div>
      </div>
  <!--forward loan--->
  <ng-template #template>
  <div class="modal-header bg-info modal-lg">
    <h4 class="modal-title text-white-75">Forward Loan</h4>
      <button
        type="button"
        class="close pull-right"
        aria-label="Close"
        (click)="closeModal()"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <div class="form-group text-primary" [formGroup]="comment">
        <textarea
          name="arae"
          formControlName="comments"
          id=""
          class="form-control"
          rows="5"
          placeholder="Comment"
        ></textarea>
      </div>
      </div>
    <div class="modal-footer">
        <button
          type="submit"
          class="btn btn-info"
          (click)="onSubmit()"
          [disabled]="comment.invalid"
        >
          OK
        </button>
        <button type="submit" class="btn btn-info" (click)="closeModal()">
          Cancel
        </button>
    </div>
  </ng-template>
  <!---edit loan-->
  <ng-template #edit>
  <div class="modal-header bg-info modal-lg">
    <h4 class="modal-title text-white-75">Edit Loan</h4>
      <button
        type="button"
        class="close pull-right"
        aria-label="Close"
        (click)="closeModal()"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <!--edit form-->
    <div class="modal-body">
  <div class="card-body mt-2 pt-3 mt-xl-1 mb-1 mx-auto pb-4 shadow-lg">
    <form [formGroup]="editLoanForm" (ngSubmit)="saveEdit()">
      <!--create a customer modal-->
      <div class="form-group text-primary">
        <label
          for="customerName"
          [ngClass]="editControls.customerName.valid ? 'text-info' : ''"
          ><i *ngIf="editControls.customerName.valid" class="material-icons"
            >check_circle</i
          >Customer name</label
        >
        <div class="input-group mb-0">
          <div class="input-group-prepend">
            <div class="input-group-text">
              <i class="fas fa-user text-primary mx-auto" style="size: 50px;">
              </i>
            </div>
          </div>
          <input
            id="customerName"
            formControlName="customerName"
            type="text"
            required
            class="form-control"
            [ngClass]="{
              'is-invalid':
                (editControls.customerName.touched ||
                  editControls.customerName.dirty) &&
                editControls.customerName.errors
            }"
            placeholder="Edit Customer name"
            autocomplete="off"
          />
        </div>
        <div
          class="text-danger"
          *ngIf="
            (editControls.customerName.touched ||
              editControls.customerName.dirty) &&
            editControls.customerName.errors?.required
          "
        >
          The customer name is required!
        </div>
        <div
          class="text-danger"
          *ngIf="
            (editControls.customerName.touched ||
              editControls.customerName.dirty) &&
            editControls.customerName.errors?.minlength
          "
        >
          At least four characters are required!
        </div>
      </div>

      <div class="form-group text-primary">
        <label
          for="loanType"
          [ngClass]="editControls.loanType.valid ? 'text-info' : ''"
          >Loan Type<i *ngIf="editControls.loanType.valid" class="material-icons"
            >check_circle</i
          ></label
        >
        <div class="input-group mb-0">
          <div class="input-group-prepend">
            <div class="input-group-text">
              <i class="fas fa-anchor text-primary mx-auto" style="size: 50px;">
              </i>
            </div>
          </div>
          <input
            id="loanType"
            formControlName="loanType"
            type="text"
            class="form-control"
            [ngClass]="{
              'is-invalid':
                (editControls.loanType.touched ||
                  editControls.loanType.dirty) &&
                editControls.loanType.errors?.required
            }"
            placeholder="Enter loan type"
            autocomplete="off"
          />
        </div>
        <div
          class="text-danger"
          *ngIf="
            (editControls.loanType.touched || editControls.loanType.dirty) &&
            editControls.loanType.errors?.required
          "
        >
          The loan type is required!
        </div>
        <div
          class="text-danger"
          *ngIf="
            (editControls.loanType.touched || editControls.loanType.dirty) &&
            editControls.loanType.errors?.required
          "
        >
          Please enter valid loan type!
        </div>
      </div>

      <div class="form-group text-primary">
        <label
          for="loanProduct"
          [ngClass]="editControls.loanProduct.valid ? 'text-info' : ''"
          >Loan Product<i
            *ngIf="editControls.loanProduct.valid"
            class="material-icons"
            >check_circle</i
          ></label
        >
        <div class="input-group mb-0">
          <div class="input-group-prepend">
            <div class="input-group-text">
              <i class="fas fa-anchor text-primary mx-auto" style="size: 50px;">
              </i>
            </div>
          </div>
          <input
            id="loanProduct"
            formControlName="loanProduct"
            type="text"
            required
            class="form-control"
            [ngClass]="{
              'is-invalid':
                (editControls.loanProduct.touched ||
                  editControls.loanProduct.dirty) &&
                editControls.loanProduct.errors
            }"
            [ngClass]="setClassInvalid(editControls.loanProduct)"
            placeholder="Enter loan product"
            autocomplete="off"
          />
        </div>
        <div
          class="text-danger"
          *ngIf="
            (editControls.loanProduct.touched ||
              editControls.loanProduct.dirty) &&
            editControls.loanProduct.errors?.required
          "
        >
          The loan product is required!
        </div>
      </div>
      <div class="form-group text-primary">
        <label
          for="tenure"
          [ngClass]="editControls.tenure.valid ? 'text-info' : ''"
          >Tenure<i *ngIf="editControls.tenure.valid" class="material-icons"
            >check_circle</i
          ></label
        >
        <div class="input-group mb-0">
          <div class="input-group-prepend">
            <div class="input-group-text">
              <i class="fas fa-anchor text-primary mx-auto" style="size: 50px;">
              </i>
            </div>
          </div>
          <input
            id="tenure"
            formControlName="tenure"
            type="number"
            required
            class="form-control"
            [ngClass]="setClassInvalid(editControls.tenure)"
            placeholder="Enter loan tenure"
            autocomplete="off"
          />
        </div>
        <div
          class="text-danger"
          *ngIf="
            (editControls.tenure.touched || editControls.tenure.dirty) &&
            editControls.tenure.errors?.required
          "
        >
          The loan tenure is required!
        </div>
      </div>
      <!--amount--->

      <div class="form-group text-primary">
        <label
          for="amount"
          [ngClass]="editControls.amount.valid ? 'text-info' : ''"
          >Amount<i *ngIf="editControls.amount.valid" class="material-icons"
            >check_circle</i
          ></label
        >
        <div class="input-group mb-0">
          <input
            id="amount"
            formControlName="amount"
            type="text"
            required
            class="form-control"
            [ngClass]="{
              'is-invalid':
                (editControls.amount.touched || editControls.amount.dirty) &&
                editControls.amount.errors
            }"
            [ngClass]="setClassInvalid(editControls.amount)"
            placeholder="Enter loan amount"
            autocomplete="off"
          />
        </div>
        <div
          class="text-danger"
          *ngIf="
            (editControls.amount.touched || editControls.amount.dirty) &&
            editControls.amount.errors?.required
          "
        >
          The loan amount is required!
        </div>
      </div>
      <div class="d-flex my-2 py-2 mx-auto">
        <button
          type="submit"
          class="btn btn-info col-5 mx-auto"
          disable="editLoanForm.invalid"
        >
          Save
        </button>

        <button
          type="button"
          class="btn btn-info col-5 mx-auto"
          (click)="closeModal()"
        >
          Cancel
        </button>
        <ngx-spinner class="bg-info" size="medium" type="ball-scale-multiple">
          <p class="text-light">Please wait...</p>
        </ngx-spinner>

        <label class="col" *ngIf="errored" class="text-danger">
          <i class="material-icons">Cancel</i>

          <ngx-alerts></ngx-alerts>
        </label>

        <label class="col" *ngIf="posted" class="text-info">
          <i class="material-icons">check_circle</i>
          <ngx-alerts></ngx-alerts>
        </label>
      </div>
    </form>
  </div>
  </div>
  </ng-template>
<ng-template #noreceived>
                <div class="col-12 my-5 py-5 justify-content-between">
                  <h4 class="text-center text-info">No Loans yet</h4>
</div>
</ng-template>
